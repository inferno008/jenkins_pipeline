pipeline {
    agent any
    stages {
        stage("build") {
            steps {
                echo "building using maven ..."
            }
            post {
                success {
                    emailext subject: "Build Status Email",
                              body: "Build was successful!",
                              to: "mbuvan75@gmail.com",
                              attachmentsPattern: '**/build.log' 
                }
            }
        }
        stage("unit and integration test") {
            steps {
                echo "testing using kobiton ..."
            }
            post {
                success {
                    emailext subject: "Testing Status Email",
                              body: "Testing was successful!",
                              to: "mbuvan75@gmail.com",
                              attachmentsPattern: '**/test.log' 
                }
            }
        }
        stage("code analysis") {
            steps {
                echo "analyzing using visual code grepper ..."
            }
            post {
                success {
                    emailext subject: "Analysis Status Email",
                              body: "Code analysis was successful!",
                              to: "mbuvan75@gmail.com",
                              attachmentsPattern: '**/analysis.log' 
                }
            }
        }
        stage("security scan") {
            steps {
                echo "security scanning using intruder ..."
            }
            post {
                success {
                    emailext subject: "Security Scan Status Email",
                              body: "Security scanning was successful!",
                              to: "mbuvan75@gmail.com",
                              attachmentsPattern: '**/security.log' 
                }
            }
        }
        stage("deploy to staging") {
            steps {
                echo "deploying to staging using aws ec2 ..."
            }
            post {
                success {
                    emailext subject: "Deploy to Staging Status Email",
                              body: "Deploy to staging was successful!",
                              to: "mbuvan75@gmail.com",
                              attachmentsPattern: '**/deploy_staging.log' 
                }
            }
        }
        stage("integration tests on staging") {
            steps {
                echo "integration tests on staging using codoid etl testing services ..."
            }
            post {
                success {
                    emailext subject: "Integration Tests on Staging Status Email",
                              body: "Integration tests on staging was successful!",
                              to: "mbuvan75@gmail.com",
                              attachmentsPattern: '**/integration_staging.log'
                }
            }
        }
        stage("deploy to production") {
            steps {
                echo "deploy to production using aws ec2 ..."
            }
            post {
                success {
                    emailext subject: "Deploy to Production Status Email",
                              body: "Deploy to production server was successful!",
                              to: "mbuvan75@gmail.com",
                              attachmentsPattern: '**/deploy_production.log' 
                }
            }
        }
    }
}
